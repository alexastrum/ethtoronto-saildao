{"version":3,"file":"hello_near.js","sources":["../node_modules/near-sdk-js/lib/near-bindgen.js","../node_modules/near-sdk-js/lib/api.js","../node_modules/near-sdk-js/lib/near-contract.js","../src/contract.ts"],"sourcesContent":["export function call(target, key, descriptor) {\n}\nexport function view(target, key, descriptor) {\n}\nexport function NearBindgen(target) {\n    return class extends target {\n        static _init() {\n            // @ts-ignore\n            let args = target.deserializeArgs();\n            let ret = new target(args);\n            // @ts-ignore\n            ret.init();\n            // @ts-ignore\n            ret.serialize();\n            return ret;\n        }\n        static _get() {\n            let ret = Object.create(target.prototype);\n            return ret;\n        }\n    };\n}\n","const U64_MAX = 2n ** 64n - 1n;\nconst EVICTED_REGISTER = U64_MAX - 1n;\nexport function log(...params) {\n    env.log(`${params\n        .map(x => x === undefined ? 'undefined' : x) // Stringify undefined\n        .map(x => typeof (x) === 'object' ? JSON.stringify(x) : x) // Convert Objects to strings\n        .join(' ')}` // Convert to string\n    );\n}\nexport function signerAccountId() {\n    env.signer_account_id(0);\n    return env.read_register(0);\n}\nexport function signerAccountPk() {\n    env.signer_account_pk(0);\n    return env.read_register(0);\n}\nexport function predecessorAccountId() {\n    env.predecessor_account_id(0);\n    return env.read_register(0);\n}\nexport function blockIndex() {\n    return env.block_index();\n}\nexport function blockHeight() {\n    return blockIndex();\n}\nexport function blockTimestamp() {\n    return env.block_timestamp();\n}\nexport function epochHeight() {\n    return env.epoch_height();\n}\nexport function attachedDeposit() {\n    return env.attached_deposit();\n}\nexport function prepaidGas() {\n    return env.prepaid_gas();\n}\nexport function usedGas() {\n    return env.used_gas();\n}\nexport function randomSeed() {\n    env.random_seed(0);\n    return env.read_register(0);\n}\nexport function sha256(value) {\n    env.sha256(value, 0);\n    return env.read_register(0);\n}\nexport function keccak256(value) {\n    env.keccak256(value, 0);\n    return env.read_register(0);\n}\nexport function keccak512(value) {\n    env.keccak512(value, 0);\n    return env.read_register(0);\n}\nexport function ripemd160(value) {\n    env.ripemd160(value, 0);\n    return env.read_register(0);\n}\nexport function ecrecover(hash, sig, v, malleabilityFlag) {\n    let ret = env.ecrecover(hash, sig, v, malleabilityFlag, 0);\n    if (ret === 0n) {\n        return null;\n    }\n    return env.read_register(0);\n}\nexport function panic(msg) {\n    if (msg !== undefined) {\n        env.panic(msg);\n    }\n    else {\n        env.panic();\n    }\n}\nexport function panicUtf8(msg) {\n    env.panic_utf8(msg);\n}\nexport function logUtf8(msg) {\n    env.log_utf8(msg);\n}\nexport function logUtf16(msg) {\n    env.log_utf16(msg);\n}\nexport function storageRead(key) {\n    let ret = env.storage_read(key, 0);\n    if (ret === 1n) {\n        return env.read_register(0);\n    }\n    else {\n        return null;\n    }\n}\nexport function storageHasKey(key) {\n    let ret = env.storage_has_key(key);\n    if (ret === 1n) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nexport function validatorStake(accountId) {\n    return env.validator_stake(accountId);\n}\nexport function validatorTotalStake() {\n    return env.validator_total_stake();\n}\nexport function altBn128G1Multiexp(value) {\n    env.alt_bn128_g1_multiexp(value, 0);\n    return env.read_register(0);\n}\nexport function altBn128G1Sum(value) {\n    env.alt_bn128_g1_sum(value, 0);\n    return env.read_register(0);\n}\nexport function altBn128PairingCheck(value) {\n    let ret = env.alt_bn128_pairing_check(value);\n    if (ret === 1n) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nexport function jsvmAccountId() {\n    env.jsvm_account_id(0);\n    return env.read_register(0);\n}\nexport function jsvmJsContractName() {\n    env.jsvm_js_contract_name(0);\n    return env.read_register(0);\n}\nexport function jsvmMethodName() {\n    env.jsvm_method_name(0);\n    return env.read_register(0);\n}\nexport function jsvmArgs() {\n    env.jsvm_args(0);\n    return env.read_register(0);\n}\nexport function jsvmStorageWrite(key, value) {\n    let exist = env.jsvm_storage_write(key, value, EVICTED_REGISTER);\n    if (exist === 1n) {\n        return true;\n    }\n    return false;\n}\nexport function jsvmStorageRead(key) {\n    let exist = env.jsvm_storage_read(key, 0);\n    if (exist === 1n) {\n        return env.read_register(0);\n    }\n    return null;\n}\nexport function jsvmStorageRemove(key) {\n    let exist = env.jsvm_storage_remove(key, EVICTED_REGISTER);\n    if (exist === 1n) {\n        return true;\n    }\n    return false;\n}\nexport function jsvmStorageHasKey(key) {\n    let exist = env.jsvm_storage_has_key(key);\n    if (exist === 1n) {\n        return true;\n    }\n    return false;\n}\nexport function jsvmCallRaw(contractName, method, args) {\n    env.jsvm_call(contractName, method, JSON.stringify(args), 0);\n    return env.read_register(0);\n}\nexport function jsvmCall(contractName, method, args) {\n    let ret = jsvmCallRaw(contractName, method, args);\n    if (ret === null) {\n        return ret;\n    }\n    return JSON.parse(ret);\n}\nexport function storageGetEvicted() {\n    return env.read_register(EVICTED_REGISTER);\n}\nexport function jsvmValueReturn(value) {\n    env.jsvm_value_return(value);\n}\n// Standalone only APIs\nexport function currentAccountId() {\n    env.current_account_id(0);\n    return env.read_register(0);\n}\nexport function input() {\n    env.input(0);\n    return env.read_register(0);\n}\nexport function storageUsage() {\n    return env.storage_usage();\n}\nexport function accountBalance() {\n    return env.account_balance();\n}\nexport function accountLockedBalance() {\n    return env.account_locked_balance();\n}\nexport function valueReturn(value) {\n    env.value_return(value);\n}\nexport function promiseCreate(accountId, methodName, args, amount, gas) {\n    return env.promise_create(accountId, methodName, args, amount, gas);\n}\nexport function promiseThen(promiseIndex, accountId, methodName, args, amount, gas) {\n    return env.promise_then(promiseIndex, accountId, methodName, args, amount, gas);\n}\nexport function promiseAnd(...promiseIndex) {\n    return env.promise_and(...promiseIndex);\n}\nexport function promiseBatchCreate(accountId) {\n    return env.promise_batch_create(accountId);\n}\nexport function promiseBatchThen(promiseIndex, accountId) {\n    return env.promise_batch_then(promiseIndex, accountId);\n}\nexport function promiseBatchActionCreateAccount(promiseIndex) {\n    env.promise_batch_action_create_account(promiseIndex);\n}\nexport function promiseBatchActionDeployContract(promiseIndex, code) {\n    env.promise_batch_action_deploy_contract(promiseIndex, code);\n}\nexport function promiseBatchActionFunctionCall(promiseIndex, methodName, args, amount, gas) {\n    env.promise_batch_action_function_call(promiseIndex, methodName, args, amount, gas);\n}\nexport function promiseBatchActionTransfer(promiseIndex, amount) {\n    env.promise_batch_action_transfer(promiseIndex, amount);\n}\nexport function promiseBatchActionStake(promiseIndex, amount, publicKey) {\n    env.promise_batch_action_stake(promiseIndex, amount, publicKey);\n}\nexport function promiseBatchActionAddKeyWithFullAccess(promiseIndex, publicKey, nonce) {\n    env.promise_batch_action_add_key_with_full_access(promiseIndex, publicKey, nonce);\n}\nexport function promiseBatchActionAddKeyWithFunctionCall(promiseIndex, publicKey, nonce, allowance, receiverId, methodNames) {\n    env.promise_batch_action_add_key_with_function_call(promiseIndex, publicKey, nonce, allowance, receiverId, methodNames);\n}\nexport function promiseBatchActionDeleteKey(promiseIndex, publicKey) {\n    env.promise_batch_action_delete_key(promiseIndex, publicKey);\n}\nexport function promiseBatchActionDeleteAccount(promiseIndex, beneficiaryId) {\n    env.promise_batch_action_delete_account(promiseIndex, beneficiaryId);\n}\nexport function promiseResultsCount() {\n    return env.promise_results_count();\n}\nexport var PromiseResult;\n(function (PromiseResult) {\n    PromiseResult[PromiseResult[\"NotReady\"] = 0] = \"NotReady\";\n    PromiseResult[PromiseResult[\"Successful\"] = 1] = \"Successful\";\n    PromiseResult[PromiseResult[\"Failed\"] = 2] = \"Failed\";\n})(PromiseResult || (PromiseResult = {}));\nexport function promiseResult(resultIdx) {\n    let status = env.promise_result(resultIdx, 0);\n    if (status == PromiseResult.Successful) {\n        return env.read_register(0);\n    }\n    else if (status == PromiseResult.Failed ||\n        status == PromiseResult.NotReady) {\n        return status;\n    }\n    else {\n        panic(`Unexpected return code: ${status}`);\n    }\n}\nexport function promiseReturn(promiseIdx) {\n    env.promise_return(promiseIdx);\n}\nexport function storageWrite(key, value) {\n    let exist = env.storage_write(key, value, EVICTED_REGISTER);\n    if (exist === 1n) {\n        return true;\n    }\n    return false;\n}\nexport function storageRemove(key) {\n    let exist = env.storage_remove(key, EVICTED_REGISTER);\n    if (exist === 1n) {\n        return true;\n    }\n    return false;\n}\nexport function storageByteCost() {\n    return 10000000000000000000n;\n}\n","import * as near from \"./api\";\nexport class NearContract {\n    deserialize() {\n        const rawState = near.storageRead(\"STATE\");\n        if (rawState) {\n            const state = JSON.parse(rawState);\n            // reconstruction of the contract class object from plain object\n            let c = this.default();\n            Object.assign(this, state);\n            for (const item in c) {\n                if (c[item].constructor?.deserialize !== undefined) {\n                    this[item] = c[item].constructor.deserialize(this[item]);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Contract state is empty\");\n        }\n    }\n    serialize() {\n        near.storageWrite(\"STATE\", JSON.stringify(this));\n    }\n    static deserializeArgs() {\n        let args = near.input();\n        return JSON.parse(args || \"{}\");\n    }\n    static serializeReturn(ret) {\n        return JSON.stringify(ret);\n    }\n    init() { }\n}\n","import { NearBindgen, NearContract, near, call, view } from \"near-sdk-js\";\nimport { promiseBatchActionFunctionCall } from \"near-sdk-js/lib/api\";\n\n// The @NearBindgen decorator allows this code to compile to Base64.\n@NearBindgen\nclass MyContract extends NearContract {\n  bookingCost: string;\n  bookings: { [dateTime: string]: string }; // '2022-08-10T21' => 'alex.near'\n  owner: string;\n\n  constructor({\n    bookingCost = \"1000000000000000000000000\", // 1â“ƒ\n    owner = \"sail.sputnikv2.testnet\", // near.predecessorAccountId()\n  }: {\n    owner?: string;\n    bookingCost?: string;\n  }) {\n    //execute the NEAR Contract's constructor\n    super();\n    this.bookingCost = bookingCost;\n    this.bookings = {};\n    this.owner = owner;\n  }\n\n  default() {\n    return new MyContract({});\n  }\n\n  // @call indicates that this is a 'change method' or a function\n  // that changes state on the blockchain. Change methods cost gas.\n  // For more info -> https://docs.near.org/docs/concepts/gas\n  @call\n  book({\n    year,\n    month,\n    day,\n    hour,\n  }: {\n    year: number;\n    month: number;\n    day: number;\n    hour: number;\n  }): void {\n    if (near.attachedDeposit().toString() !== this.bookingCost) {\n      throw new Error(\n        `Invalid deposit ${near.attachedDeposit()} !== ${this.bookingCost}`\n      );\n    }\n\n    const who = near.predecessorAccountId();\n    const dateTime = `${year}-${month}-${day}T${hour}`;\n\n    if (this.bookings.hasOwnProperty(dateTime)) {\n      throw new Error(\n        `Boat already booked for ${dateTime} by ${this.bookings[dateTime]}`\n      );\n    }\n\n    this.bookings[dateTime] = who;\n    near.log(`${who} booked boat owned by ${this.owner} for ${dateTime}`);\n\n    const batchId = near.promiseBatchCreate(this.owner);\n\n    // near.promiseBatchActionTransfer(batchId, near.attachedDeposit());\n\n    near.promiseBatchActionFunctionCall(\n      batchId,\n      \"add_proposal\",\n      `{\n        proposal: {\n          description: \"Automated proposal$$$$$$$$ProposeAddMember\",\n          kind: {\n            AddMemberToRole: {\n              member_id: \"${who}\",\n              role: \"members\",\n            },\n          },\n        },\n      }`,\n      near.attachedDeposit(),\n      near.prepaidGas()\n    );\n\n    // near.promiseBatchActionFunctionCall(\n    //   batchId,\n    //   \"act_proposal\",\n    //   `{\n    //     \"id\": 0,\n    //     \"action\": \"VoteApprove\"\n    //   }`,\n    //   0,\n    //   near.prepaidGas()\n    // );\n  }\n\n  // @view indicates a 'view method' or a function that returns\n  // the current values stored on the blockchain. View calls are free\n  // and do not cost gas.\n  @view\n  get_booking_cost(): string {\n    return this.bookingCost.toString();\n  }\n\n  // @view indicates a 'view method' or a function that returns\n  // the current values stored on the blockchain. View calls are free\n  // and do not cost gas.\n  @view\n  get_booking({\n    year,\n    month,\n    day,\n    hour,\n  }: {\n    year: number;\n    month: number;\n    day: number;\n    hour: number;\n  }): string {\n    const dateTime = `${year}-${month}-${day}T${hour}`;\n    const who = this.bookings[dateTime];\n    near.log(\n      who\n        ? `Boat booked for ${dateTime} by ${who}`\n        : `Boat available for ${dateTime}`\n    );\n    return who;\n  }\n}\n"],"names":["call","target","key","descriptor","view","NearBindgen","_init","args","deserializeArgs","ret","init","serialize","_get","Object","create","prototype","U64_MAX","EVICTED_REGISTER","log","params","env","map","x","undefined","JSON","stringify","join","predecessorAccountId","predecessor_account_id","read_register","attachedDeposit","attached_deposit","prepaidGas","prepaid_gas","storageRead","storage_read","input","promiseBatchCreate","accountId","promise_batch_create","promiseBatchActionFunctionCall","promiseIndex","methodName","amount","gas","promise_batch_action_function_call","PromiseResult","storageWrite","value","exist","storage_write","NearContract","deserialize","rawState","near","state","parse","c","default","assign","item","constructor","Error","serializeReturn","MyContract","bookingCost","owner","bookings","book","year","month","day","hour","toString","who","dateTime","hasOwnProperty","batchId","get_booking_cost","get_booking"],"mappings":"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"}